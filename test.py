import streamlit as st
import random

st.set_page_config(page_title="오늘의 코디 추천", page_icon="👕", layout="centered")

st.title("👕 오늘의 코디 추천")
st.write("날씨와 기분을 선택하면, 랜덤 코디와 이미지를 보여드려요!")

# 날씨와 기분 선택
weather = st.selectbox("오늘 날씨는 어떤가요?", ["맑음", "비", "눈", "더움", "추움"])
mood = st.selectbox("오늘 기분은 어떤가요?", ["활발", "차분", "우울", "설렘", "편안"])

# 코디 데이터
outfits = {
    "맑음": {
        "활발": ["밝은색 티셔츠 + 청바지 + 운동화", "스트라이프 셔츠 + 치노팬츠"],
        "차분": ["화이트 셔츠 + 슬랙스 + 로퍼", "가디건 + 원피스"],
        "우울": ["후드티 + 조거팬츠", "니트 + 데님팬츠"],
        "설렘": ["플로럴 원피스 + 샌들", "셔츠 + 니트조끼 + 스커트"],
        "편안": ["오버핏 티셔츠 + 반바지", "루즈핏 맨투맨 + 트레이닝팬츠"],
    },
    "비": {
        "활발": ["방수 자켓 + 조거팬츠", "야상 + 반팔티"],
        "차분": ["트렌치코트 + 셔츠 + 슬랙스", "롱원피스 + 레인부츠"],
        "우울": ["블랙 후드집업 + 청바지", "니트 + 와이드팬츠"],
        "설렘": ["컬러풀 우산 + 미니원피스", "레인코트 + 밝은 부츠"],
        "편안": ["롱 가디건 + 레깅스", "빅사이즈 셔츠 + 조거팬츠"],
    },
    "눈": {
        "활발": ["패딩 + 스키팬츠", "후리스 + 청바지"],
        "차분": ["울코트 + 머플러", "니트 원피스 + 롱부츠"],
        "우울": ["블랙 패딩 + 조거팬츠", "후드 + 데님팬츠"],
        "설렘": ["화이트 코트 + 스커트", "컬러 패딩 + 부츠"],
        "편안": ["퍼 자켓 + 레깅스", "롱패딩 + 츄리닝"],
    },
    "더움": {
        "활발": ["반팔티 + 반바지 + 샌들", "민소매 + 린넨팬츠"],
        "차분": ["린넨셔츠 + 슬랙스", "롱 원피스 + 샌들"],
        "우울": ["오버핏 티셔츠 + 반바지", "민소매 + 트레이닝팬츠"],
        "설렘": ["플로럴 원피스 + 샌들", "크롭티 + 미니스커트"],
        "편안": ["헐렁한 티셔츠 + 반바지", "루즈핏 셔츠 + 와이드팬츠"],
    },
    "추움": {
        "활발": ["패딩 + 조거팬츠", "점퍼 + 데님팬츠"],
        "차분": ["코트 + 니트 + 머플러", "니트 원피스 + 롱부츠"],
        "우울": ["블랙 패딩 + 츄리닝", "니트 + 와이드팬츠"],
        "설렘": ["더플코트 + 체크스커트", "컬러 코트 + 원피스"],
        "편안": ["후드티 + 패딩바지", "롱패딩 + 니트"],
    }
}

# Unsplash 키워드 (회원가입 불필요)
unsplash_keywords = {
    "맑음": "casual,outfit,fashion",
    "비": "raincoat,umbrella,style",
    "눈": "winter,outfit,coat",
    "더움": "summer,casual,look",
    "추움": "winter,knit,coat",
}

if st.button("코디 추천 받기 🎁"):
    # 추천 코디 텍스트
    recommendation = random.choice(outfits[weather][mood])
    st.success(f"오늘의 추천 코디는: **{recommendation}** ✨")

    # Unsplash 랜덤 이미지
    keyword = unsplash_keywords[weather]
    sig = random.randint(1, 100000)  # 매번 다른 이미지 강제
    img_url = f"https://source.unsplash.com/400x400/?{keyword}&sig={sig}"

    st.image(img_url, caption="랜덤 패션 이미지", use_column_width=True)


