import streamlit as st

# í˜ì´ì§€ ì„¤ì •
st.set_page_config(page_title="MBTI ì„±ê²© í…ŒìŠ¤íŠ¸", page_icon="ğŸ§ ", layout="centered")

st.markdown(
    """
    <style>
    .title {
        font-size: 2.5em;
        font-weight: bold;
        color: #4CAF50;
        text-align: center;
    }
    .result {
        font-size: 2em;
        color: #FF5722;
        text-align: center;
        font-weight: bold;
    }
    .desc {
        font-size: 1.2em;
        text-align: center;
        margin-top: 20px;
    }
    </style>
    """,
    unsafe_allow_html=True
)

st.markdown('<div class="title">ğŸ§  ë‚˜ì˜ MBTI ì„±ê²© í…ŒìŠ¤íŠ¸</div>', unsafe_allow_html=True)
st.write("ì•„ë˜ 8ê°€ì§€ ì§ˆë¬¸ì— ë‹µí•´ ë³´ì„¸ìš”! ë‹¹ì‹ ì˜ ì„±ê²© ìœ í˜•ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.")

# ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ (8ê°œ)
questions = [
    ("íŒŒí‹°ì— ê°€ë©´ ë‚˜ëŠ”?", ["ì‚¬ëŒë“¤ê³¼ í™œë°œíˆ ì–´ìš¸ë¦°ë‹¤", "ëª‡ ëª…ê³¼ ì¡°ìš©íˆ ì´ì•¼ê¸°í•œë‹¤"]),
    ("íœ´ì¼ ê³„íšì€?", ["ë¯¸ë¦¬ ê³„íšì„ ì„¸ìš´ë‹¤", "ê·¸ë•Œê·¸ë•Œ ì •í•œë‹¤"]),
    ("ê²°ì •í•  ë•Œ ë” ì¤‘ìš”í•œ ê²ƒì€?", ["ë…¼ë¦¬ì™€ ì‚¬ì‹¤", "ê°ì •ê³¼ ê´€ê³„"]),
    ("ì •ë³´ë¥¼ ë°›ì„ ë•Œ ë‚˜ëŠ”?", ["ì„¸ë¶€ì‚¬í•­ê³¼ ì‚¬ì‹¤ì— ì§‘ì¤‘í•œë‹¤", "ì•„ì´ë””ì–´ì™€ ê°€ëŠ¥ì„±ì— ì£¼ëª©í•œë‹¤"]),
    ("ì¹œêµ¬ì™€ ëŒ€í™”í•  ë•Œ ë‚˜ëŠ”?", ["ëŒ€í™”ë¥¼ ì£¼ë„í•œë‹¤", "ê²½ì²­í•˜ëŠ” í¸ì´ë‹¤"]),
    ("ì¼ì„ ì²˜ë¦¬í•  ë•Œ ë‚˜ëŠ”?", ["ì •í•´ì§„ ê·œì¹™ê³¼ ì ˆì°¨ë¥¼ ë”°ë¥¸ë‹¤", "ìƒí™©ì— ë§ê²Œ ìœ ì—°í•˜ê²Œ í•œë‹¤"]),
    ("ë¬¸ì œë¥¼ í•´ê²°í•  ë•Œ ë‚˜ëŠ”?", ["ê°ê´€ì ì¸ ìë£Œë¥¼ ë³¸ë‹¤", "ì‚¬ëŒë“¤ì˜ ê¸°ë¶„ì„ ê³ ë ¤í•œë‹¤"]),
    ("ì°½ì˜ì ì¸ í™œë™ì—ì„œ ë‚˜ëŠ”?", ["í˜„ì‹¤ì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ ê²ƒì— ì§‘ì¤‘", "ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ ìƒìƒ"])
]

# MBTI ì ìˆ˜ ì´ˆê¸°í™”
scores = {"E": 0, "I": 0, "J": 0, "P": 0, "T": 0, "F": 0, "S": 0, "N": 0}

# ì§ˆë¬¸ í‘œì‹œ
for idx, (q, options) in enumerate(questions):
    choice = st.radio(f"{idx+1}. {q}", options, key=idx)
    if idx in [0, 4]:  # E / I
        scores["E"] += choice == options[0]
        scores["I"] += choice == options[1]
    elif idx in [1, 5]:  # J / P
        scores["J"] += choice == options[0]
        scores["P"] += choice == options[1]
    elif idx in [2, 6]:  # T / F
        scores["T"] += choice == options[0]
        scores["F"] += choice == options[1]
    elif idx in [3, 7]:  # S / N
        scores["S"] += choice == options[0]
        scores["N"] += choice == options[1]

# MBTI ê²°ê³¼ ì„¤ëª…
mbti_descriptions = {
    "ISTJ": "ì‹ ì¤‘í•˜ê³  ì±…ì„ê° ìˆëŠ” ê´€ë¦¬ìí˜•. ì•½ì†ì„ ì˜ ì§€í‚¤ê³  ì²´ê³„ì ì¸ ì„±ê²©.",
    "ISFJ": "í—Œì‹ ì ì´ê³  ë°°ë ¤ì‹¬ ê¹Šì€ ìˆ˜í˜¸ìí˜•. ì£¼ë³€ ì‚¬ëŒì„ ì˜ ëŒë´„.",
    "INFJ": "í†µì°°ë ¥ ìˆê³  ì´ìƒì£¼ì˜ì ì¸ ì˜¹í˜¸ìí˜•. ê¹Šì€ ëŒ€í™”ë¥¼ ì¢‹ì•„í•¨.",
    "INTJ": "ê³„íšì ì´ê³  ì „ëµì ì¸ ì „ëµê°€í˜•. ëª©í‘œë¥¼ í–¥í•´ ì°¨ê·¼ì°¨ê·¼ ë‚˜ì•„ê°.",
    "ISTP": "ìœ ì—°í•˜ê³  ë¶„ì„ì ì¸ ì¥ì¸í˜•. ë¬¸ì œ í•´ê²°ì— ëŠ¥ìˆ™í•¨.",
    "ISFP": "ë”°ëœ»í•˜ê³  ì˜ˆìˆ ì ì¸ ì˜ˆìˆ ê°€í˜•. ì¡°ìš©í•˜ì§€ë§Œ ê°ì •ì´ ê¹ŠìŒ.",
    "INFP": "ì´ìƒì ì´ê³  ê°€ì¹˜ ì§€í–¥ì ì¸ ì¤‘ì¬ìí˜•. ë‹¤ë¥¸ ì‚¬ëŒì„ ë•ëŠ” ê²ƒì„ ì¢‹ì•„í•¨.",
    "INTP": "í˜¸ê¸°ì‹¬ ë§ê³  ë¶„ì„ì ì¸ ì‚¬ìƒ‰ê°€í˜•. ìƒˆë¡œìš´ ì§€ì‹ì„ íƒêµ¬í•¨.",
    "ESTP": "í™œë°œí•˜ê³  ë„ì „ì ì¸ ì‚¬ì—…ê°€í˜•. ì¦‰í¥ì ìœ¼ë¡œ ë¬¸ì œ í•´ê²°.",
    "ESFP": "ì‚¬êµì ì´ê³  ê¸ì •ì ì¸ ì—°ì˜ˆì¸í˜•. ì¦ê±°ìš´ ë¶„ìœ„ê¸°ë¥¼ ë§Œë“¦.",
    "ENFP": "ì°½ì˜ì ì´ê³  ì—´ì •ì ì¸ í™œë™ê°€í˜•. ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ íƒí—˜.",
    "ENTP": "ë…¼ìŸì„ ì¦ê¸°ê³  ì•„ì´ë””ì–´ê°€ ë§ì€ ë°œëª…ê°€í˜•.",
    "ESTJ": "ì²´ê³„ì ì´ê³  ì‹¤ìš©ì ì¸ ê²½ì˜ìí˜•. ë¦¬ë”ì‹­ì´ ë›°ì–´ë‚¨.",
    "ESFJ": "ì¹œì ˆí•˜ê³  í˜‘ì¡°ì ì¸ ì‚¬êµê°€í˜•. ê´€ê³„ë¥¼ ì¤‘ìš”ì‹œí•¨.",
    "ENFJ": "ì¹´ë¦¬ìŠ¤ë§ˆ ìˆê³  ì‚¬êµì ì¸ ì§€ë„ìí˜•. íƒ€ì¸ì„ ì´ë„ëŠ” ë° ëŠ¥ìˆ™.",
    "ENTJ": "ê²°ë‹¨ë ¥ ìˆê³  íš¨ìœ¨ì ì¸ ì§€íœ˜ê´€í˜•. ëª©í‘œ ë‹¬ì„±ì— ì§‘ì¤‘."
}

# ê²°ê³¼ ë²„íŠ¼
if st.button("ğŸ“Š ê²°ê³¼ í™•ì¸í•˜ê¸°"):
    mbti = ""
    mbti += "E" if scores["E"] >= scores["I"] else "I"
    mbti += "S" if scores["S"] >= scores["N"] else "N"
    mbti += "T" if scores["T"] >= scores["F"] else "F"
    mbti += "J" if scores["J"] >= scores["P"] else "P"

    st.balloons()  # í’ì„  íš¨ê³¼
    st.markdown(f'<div class="result">ë‹¹ì‹ ì˜ MBTIëŠ” {mbti} ì…ë‹ˆë‹¤!</div>', unsafe_allow_html=True)

    if mbti in mbti_descriptions:
        st.markdown(f'<div class="desc">{mbti_descriptions[mbti]}</div>', unsafe_allow_html=True)

    # MBTI ì´ë¯¸ì§€ í‘œì‹œ (êµ¬ê¸€ ì´ë¯¸ì§€ ì‚¬ìš© ê°€ëŠ¥)
    st.image(f"https://raw.githubusercontent.com/creotiv/mbti-icons/main/{mbti}.png", width=200)
